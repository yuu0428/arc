# モバイル UI/UX と回転挙動に関する調査報告

ユーザー様よりご指摘のあった「回転時のテキストのずれ」および「テキストサイズが大きくなる位置（アクティブ位置）のズレ」について、コード解析とブラウザでの実測値を元に調査しました。

## 1. テキストの回転ずれ（Text Misalignment）

### 現象

メニュー項目が「アクティブ（選択状態）」になった際、テキストが水平にならず、少し右上がりに傾いて表示されます。

### 原因

コード上の計算式により、アクティブ時のテキスト角度が **-23 度（337 度）** になるよう設定されているためです。

- **論理上のアクティブ位置**: `165度` (`targetAngleOffset`)
- **表示上の補正**: `-8度` (`displayOffset`)
- **文字の反転**: `+180度` (外向き/内向きの調整)

**計算式**:
`165 (active) - 8 (offset) + 180 (flip) = 337度`
337 度は **-23 度** と同じであり、結果としてテキストは **「水平から 23 度ほど右肩上がり」** の状態で最大サイズになります。

### 解決案

アクティブ時にテキストを水平（0 度）にしたい場合、以下のいずれかの調整が必要です。

1.  `targetAngleOffset` を `188度` 付近に変更する（ただし表示位置も変わります）。
2.  CSS の `rotate(180deg)` を `rotate(203deg)` などに変更して補正する。

## 2. アクティブ位置のズレ（Position Mismatch）

### 現象

「見た目でちょうど良い位置」に来た時と、「文字が最大サイズになる時」が微妙にずれているように感じられます。

### 原因

**「論理的な判定位置」と「視覚的な表示位置」に 8 度のズレ (`displayOffset: -8`) があるため** です。

- プログラムは **165 度** の位置にあるアイテムを「アクティブ（最大サイズ）」と判定します。
- しかし、画面上ではそのアイテムは **157 度** (`165 - 8`) の位置に描画されます。

ユーザーが「画面上の特定の位置（例えば 165 度）」にアイテムを合わせようとすると、プログラム上ではまだ（あるいは既に）ピークを過ぎており、サイズが最大になりきらない、あるいはズレて最大化するという現象が発生します。

### 解決案

`displayOffset` を `0` にするか、あるいは `targetAngleOffset` の判定ロジックにも `displayOffset` を考慮させることで、見た目と判定を一致させる必要があります。

## 3. モバイルレイアウト（スマホ前提）での影響

スマホ（iPhone 12/13 等）ではメニューの直径が `110vw` と非常に大きく、画面の右上隅を中心としています。
このレイアウトにおいて、上記の「-23 度の傾き」は、画面左下に向かって放射状に広がるメニューの中で、特に目立ちやすくなります。
また、指で操作する際、自分の指で隠れる位置とアクティブ判定位置がずれていると、操作の違和感（「思ったところで止まらない」感じ）に繋がります。

## まとめ

ご指摘の通り、仕様上の数値設定により「角度」と「判定」にズレが生じています。

- **テキスト角度**: 水平ではなく -23 度 になっている。
- **アクティブ位置**: 見た目より 8 度 ずれた位置で最大化判定されている。

これらはバグというよりは、パラメータ調整（チューニング）によって解消すべきデザイン上の課題です。
