# リファクタリング計画書

現状の `script.js`（約 760 行）と `style.css`（約 940 行）は、全ての機能が 1 つのファイルに詰め込まれており、可読性と保守性が低下し始めています。
Vite プロジェクトであることを活かし、機能ごとにファイルを分割（モジュール化）することを提案します。

## 1. JavaScript のモジュール化

`script.js` を機能単位で分割し、`src/js/` ディレクトリ（仮）に整理します。

### 構成案

```
src/
  js/
    main.js           # エントリーポイント（各モジュールの読み込み）
    modules/
      hero.js         # ヒーローセクション（スクロール、パララックス）
      navigation.js   # 円形ナビゲーション（Circular Nav）
      logo.js         # ロゴの切り替え・コントラスト判定
      scroll-reveal.js # スクロール連動フェードイン
      utils.js        # 汎用関数（clamp, normalizeAngle, RGB解析など）
      anchor.js       # ページ内リンクの制御
```

### メリット

- **可読性向上**: 各ファイルの行数が減り、目的のコードが見つけやすくなります。
- **スコープの分離**: グローバル変数の汚染を防ぎ、変数の衝突を回避できます。
- **再利用性**: 汎用関数（Utils）を他の場所でも使いやすくなります。

## 2. CSS の分割・整理

`style.css` をコンポーネントごとに分割し、`src/css/` ディレクトリ（仮）に整理します。
Vite の機能で、JS 側で `import` するか、CSS 内で `@import` を使用して結合します。

### 構成案

```
src/
  css/
    main.css          # 全体の統合ファイル
    base/
      variables.css   # 色、フォント、z-indexなどの変数定義
      reset.css       # リセットCSS、基本設定
    components/
      header.css      # ヘッダー、メニューボタン
      hero.css        # ヒーローセクション
      circular-nav.css # 円形ナビゲーション
      about.css       # Aboutセクション
      note.css        # Noteセクション
    utilities.css     # 汎用クラス
```

### メリット

- **管理のしやすさ**: 「ナビゲーションのスタイルを変えたい」時は `circular-nav.css` だけを見れば良くなります。
- **変数の統一**: `variables.css` に色や数値を集約することで、デザインの一貫性を保ちやすくなります。

## 3. 実施手順

1.  **ディレクトリ作成**: `src/js`, `src/css` などのフォルダを作成。
2.  **ファイル移動・分割**: コードをコピー＆ペーストで各ファイルに移動し、`export`/`import` 文を追加。
3.  **エントリーポイント修正**: `index.html` の読み込み先を新しい `main.js` に変更。
4.  **動作確認**: 分割後もサイトが正常に動作するか（特に Circular Nav やアニメーション）を入念に確認。

## 4. 質問・確認事項

- この構成案で進めてよろしいでしょうか？
- 特に `src` ディレクトリを作成して整理する形（一般的な Vite 構成）に寄せても問題ありませんか？（現在はルートにファイルが散らばっています）
