(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const r of d)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function l(d){const r={};return d.integrity&&(r.integrity=d.integrity),d.referrerPolicy&&(r.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?r.credentials="include":d.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(d){if(d.ep)return;d.ep=!0;const r=l(d);fetch(d.href,r)}})();const U=o=>Math.max(0,Math.min(1,o)),j=o=>{if(!o)return null;const s=o.match(/rgba?\(([^)]+)\)/);if(!s)return null;const l=s[1].split(",").map(i=>i.trim());if(l.length<3)return null;const c=Number(l[0]),d=Number(l[1]),r=Number(l[2]),n=l[3]!==void 0?Number(l[3]):1;return[c,d,r,n].some(i=>Number.isNaN(i))?null:{r:c,g:d,b:r,a:n}},z=(o,s=0)=>{if(!o||s>10)return j(getComputedStyle(document.body).backgroundColor)||{r:255,g:255,b:255,a:1};const l=getComputedStyle(o),c=j(l.backgroundColor);return c&&c.a>0&&l.backgroundImage==="none"?c:z(o.parentElement,s+1)},V=(o,s,l=[],c)=>{if(c){const n=c.getBoundingClientRect();if(o>=n.left&&o<=n.right&&s>=n.top&&s<=n.bottom){const i=j(getComputedStyle(c).backgroundColor);if(i)return i}}const d=[];l.forEach(n=>{n instanceof Element&&(d.push({element:n,previous:n.style.pointerEvents}),n.style.pointerEvents="none")});let r=null;try{r=document.elementFromPoint(o,s)}catch{r=null}finally{d.forEach(({element:n,previous:i})=>{n.style.pointerEvents=i})}return z(r)||z(document.body)},re=(o,s)=>{let l=s-o;for(;l>180;)l-=360;for(;l<-180;)l+=360;return l},q=o=>{const s=(o%360+360)%360;return s>180?s-360:s};function se(o,s){if(!o||!s)return()=>{};let l=0,c=!1;return()=>{const r=o.getBoundingClientRect(),n=window.innerHeight||s.getBoundingClientRect().height||1,i=U(-r.top/n);Math.abs(i-l)>.001&&(l=i,o.style.setProperty("--hero-progress",l.toFixed(4)));const a=l>=.98;a!==c&&(c=a,o.classList.toggle("is-released",c),o.classList.toggle("is-dismissed",c))}}function oe(o,s,l){if(!o||!s)return()=>{};let c="default";const d=i=>{const a=s.dataset,g=`src${i.charAt(0).toUpperCase()}${i.slice(1)}`,p=[a[g],a.srcDefault,a.srcLight,a.srcDark].find(u=>typeof u=="string"&&u.trim().length>0);if(!p)return"";try{return new URL(p,window.location.href).href}catch{return p}},r=i=>{const a=d(i);!a||s.src===a||(s.src=a,c=i)};return r("default"),()=>{const i=o.getBoundingClientRect(),a=i.left+i.width/2,g=i.top+i.height/2,m=V(a,g,[o],l),{r:p,g:u,b:C}=m||{r:255,g:255,b:255},M=(.2126*p+.7152*u+.0722*C)/255;let e;M>=.65?e="light":M<=.35?e="dark":e="mid",o.dataset.theme!==e&&(o.dataset.theme=e);const A=e==="dark"?"dark":e==="light"?"light":"default";c!==A&&r(A)}}function ie(o,s,l,c,d){const r=o,n=r.querySelector("[data-nav-wheel]"),i=r.querySelector(".js-nav-backdrop");if(!n)return;const a=Array.from(n.querySelectorAll("[data-nav-item]"));if(!a.length)return;let g=r.querySelector(".js-nav-guide");g||(g=document.createElement("div"),g.className="nav-circular__guide js-nav-guide",r.appendChild(g));const m={isOpen:!1},p=24,u=360-p,e={rotation:0,lastAngle:0,pointerId:null,isDragging:!1,startRotation:0,didDrag:!1,radius:0,snapTimer:null,hideTimer:null,resizeTimer:null,baseAngles:[],step:0,gapAngle:p,arcSpan:u,targetAngleOffset:165,displayOffset:-8};if(a.length===1)e.baseAngles=[0],e.step=360;else{e.step=-360/a.length,e.baseAngles=a.map((I,T)=>T*e.step);const t=-90,y=(e.baseAngles[a.length-1]??0)+e.step/2;e.rotation=q(t-y+e.targetAngleOffset);const b=e.baseAngles[0],w=q(b+e.rotation),E=q(e.targetAngleOffset-w);e.rotation+=E}let A=null,S=!1;const v=t=>{m.isOpen&&(t.preventDefault(),t.stopPropagation())},O=r.querySelectorAll("[data-nav-close]");s.addEventListener("click",()=>{s.getAttribute("aria-expanded")==="true"?L():P()}),O.forEach(t=>{t.addEventListener("click",()=>{L()})}),r.addEventListener("transitionend",t=>{t.target!==r||t.propertyName!=="opacity"||m.isOpen||(r.hidden=!0,r.setAttribute("aria-hidden","true"))}),n.addEventListener("pointerdown",Y),n.addEventListener("pointermove",G),n.addEventListener("pointerup",k),n.addEventListener("pointercancel",k),n.addEventListener("pointerleave",k),n.addEventListener("wheel",K,{passive:!1}),window.addEventListener("resize",W),a.forEach(t=>{t.addEventListener("click",f=>{if(e.didDrag){e.didDrag=!1;return}f.preventDefault();const y=t.getAttribute("data-target");if(y){const b=document.querySelector(y);b&&(c&&c.handleManualTrigger(y),b.scrollIntoView({behavior:"smooth",block:"start"}))}L()})});const h=()=>{const t=s.getBoundingClientRect();if(!t.width||!t.height)return;const f=t.left+t.width/2,y=t.top+t.height/2,b=V(f,y,[s],d),{r:w,g:E,b:I}=b||{r:255,g:255,b:255},F=(.2126*w+.7152*E+.0722*I)/255<=.35;s.classList.toggle("is-inverted",F)};function P(){m.isOpen||(A=document.activeElement instanceof HTMLElement?document.activeElement:null,r.hidden=!1,r.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{r.classList.add("is-visible"),requestAnimationFrame(()=>{x(!0)})}),m.isOpen=!0,l.setAttribute("data-hidden","false"),document.body.classList.add("nav-open"),document.body.style.setProperty("overflow","hidden"),r.addEventListener("wheel",v,{passive:!1}),r.addEventListener("touchmove",v,{passive:!1}),n.addEventListener("touchmove",v,{passive:!1}),i?.addEventListener("touchmove",v,{passive:!1}),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label","メニューを閉じる"),h(),$(),document.addEventListener("keydown",D),Q())}function L(){m.isOpen&&(m.isOpen=!1,r.classList.remove("is-visible"),r.setAttribute("aria-hidden","true"),s.setAttribute("aria-expanded","false"),s.setAttribute("aria-label","メニューを開く"),document.body.classList.remove("nav-open"),document.body.style.removeProperty("overflow"),r.removeEventListener("wheel",v,{passive:!1}),r.removeEventListener("touchmove",v,{passive:!1}),n.removeEventListener("touchmove",v,{passive:!1}),i?.removeEventListener("touchmove",v,{passive:!1}),document.removeEventListener("keydown",D),n.classList.remove("is-dragging"),e.isDragging=!1,e.pointerId=null,e.didDrag=!1,window.clearTimeout(e.snapTimer),window.clearTimeout(e.resizeTimer),window.clearTimeout(e.hideTimer),e.snapTimer=null,e.resizeTimer=null,e.hideTimer=window.setTimeout(()=>{m.isOpen||(r.hidden=!0,r.setAttribute("aria-hidden","true"))},260),A&&typeof A.focus=="function"?A.focus({preventScroll:!0}):s.focus({preventScroll:!0}),h())}function D(t){if(m.isOpen){if(t.key==="Escape"){t.preventDefault(),L();return}t.key==="ArrowRight"||t.key==="ArrowDown"?(t.preventDefault(),H(-e.step)):(t.key==="ArrowLeft"||t.key==="ArrowUp")&&(t.preventDefault(),H(e.step))}}function Y(t){t.pointerType==="mouse"&&t.button!==0||(e.isDragging=!0,e.pointerId=t.pointerId,e.startRotation=e.rotation,e.lastAngle=_(t),e.didDrag=!1,n.classList.add("is-dragging"),n.setPointerCapture&&n.setPointerCapture(t.pointerId))}function G(t){if(!e.isDragging||e.pointerId!==t.pointerId)return;const f=_(t);if(Number.isNaN(f))return;const y=re(e.lastAngle,f);e.rotation+=y,e.lastAngle=f,Math.abs(e.rotation-e.startRotation)>e.step*.08&&(e.didDrag=!0),x()}function k(t){!e.isDragging||e.pointerId!==null&&e.pointerId!==t.pointerId||(e.isDragging=!1,e.pointerId=null,n.classList.remove("is-dragging"),n.releasePointerCapture&&t.pointerId!==void 0&&n.releasePointerCapture(t.pointerId),B(),e.didDrag=!1)}function K(t){t.preventDefault();const f=Math.abs(t.deltaY)>Math.abs(t.deltaX)?t.deltaY:t.deltaX;Number.isNaN(f)||(e.rotation+=f*.22,e.didDrag=!0,x())}function W(){m.isOpen&&(window.clearTimeout(e.resizeTimer),e.resizeTimer=window.setTimeout(()=>{e.radius=0,x(!0)},140))}function H(t){e.rotation+=t,e.didDrag=!0,x(),J()}function J(){window.clearTimeout(e.snapTimer),e.snapTimer=window.setTimeout(()=>{B(),e.didDrag=!1},260)}function B(){const t=N();if(t===null)return;const f=e.baseAngles[t],y=q(f+e.rotation-e.targetAngleOffset);e.rotation-=y,x(),$()}function $(){const t=N(),f=a[t]||a[0];f&&f.focus({preventScroll:!0})}function x(t=!1){const f=n.getBoundingClientRect();if(!f.width||!f.height)return;(t||!e.radius)&&(e.radius=Math.max(f.width/2-100,f.width*.46));const y=N();a.forEach((w,E)=>{const T=(e.baseAngles[E]??0)+e.rotation,F=Math.abs(q(T-e.targetAngleOffset)),X=Math.max(0,1-Math.min(F/(e.step*1.1||1),1)),R=E===y,Z=R?1.06:.84+X*.22,ee=R?1:.85,te=Math.max(e.radius*.75,e.radius-60),ne=`translate(-50%, -40%) rotate(${(T+e.displayOffset).toFixed(3)}deg) translateX(${te.toFixed(3)}px) rotate(${(180-e.displayOffset).toFixed(3)}deg) scale(${Z.toFixed(3)})`;w.style.transform=ne,w.style.opacity=ee,w.style.zIndex=String(100+Math.round(X*100)),w.classList.toggle("is-active",R),w.setAttribute("tabindex",R?"0":"-1")});const b=w=>(w%360+360)%360;if(a.length>=2){const w=e.baseAngles[0]??0,E=b(w+e.rotation+e.displayOffset+e.targetAngleOffset+180),I=b(E+e.step/2),T=b(I+e.gapAngle/2+105);n.style.setProperty("--nav-arc-start",`${T}deg`)}n.style.setProperty("--nav-arc-span",`${e.arcSpan}deg`)}function N(){let t=0,f=Number.POSITIVE_INFINITY;return a.forEach((y,b)=>{const w=e.baseAngles[b]+e.rotation,E=Math.abs(q(w-e.targetAngleOffset));E<f&&(f=E,t=b)}),t}function _(t){const f=n.getBoundingClientRect(),y=f.left+f.width/2,b=f.top+f.height/2;return Math.atan2(t.clientY-b,t.clientX-y)*(180/Math.PI)}function Q(){if(S||!g)return;const t=window.matchMedia("(max-width: 600px)").matches;g.textContent=t?"左右スワイプで選択、タップで決定、外側タップか×で閉じる":"←/→ で移動、Enterで決定、Escで閉じる",g.classList.add("is-visible"),S=!0,window.setTimeout(()=>{g?.classList.remove("is-visible")},2800)}return{evaluateMenuToggleContrast:h}}function ae(){const o=[...document.querySelectorAll(".js-about-heading, .js-about-text, .js-about-image, .js-person-card")];if(!o.length)return;const s=window.matchMedia("(prefers-reduced-motion: reduce)"),l=document.querySelector('.js-person-card[data-person="haruto"]'),c=document.querySelector('.js-person-card[data-person="riko"]'),d=(i,a,g,m)=>{const p=i.getBoundingClientRect(),u=p.top+p.height/2,C=Math.max(0,u-g);return U(1-C/m)},r=()=>{if(s.matches||!document.body.classList.contains("has-scroll-reveal")){o.forEach(p=>p.style.removeProperty("--scroll-fade-progress"));return}const i=window.innerHeight||1,a=i*.65,g=Math.max(1,i*.35),m=l&&l.isConnected?d(l,i,a,g):null;o.forEach(p=>{let u;m!==null&&(p===l||p===c)?u=m:u=d(p,i,a,g),p.style.setProperty("--scroll-fade-progress",u.toFixed(3))})},n=()=>{s.matches?(document.body.classList.remove("has-scroll-reveal"),o.forEach(i=>i.style.removeProperty("--scroll-fade-progress"))):(document.body.classList.add("has-scroll-reveal"),r())};n(),s.addEventListener("change",n),window.addEventListener("scroll",()=>{window.requestAnimationFrame(r)},{passive:!0}),window.addEventListener("resize",()=>{window.requestAnimationFrame(r)}),r()}function le(){const o=Array.from(document.querySelectorAll(".js-person-card")),s=new Map;if(o.length&&s.set("#greatings",{elements:o,timer:null}),!s.size)return null;const l="anchor-jump-visible",c=1200,d=n=>{if(typeof n!="string"||!s.has(n))return;const i=s.get(n);i&&(window.clearTimeout(i.timer),i.elements.forEach(a=>a.classList.add(l)),i.timer=window.setTimeout(()=>{i.elements.forEach(a=>a.classList.remove(l))},c))},r=n=>{const i=n.target instanceof Element?n.target:null;if(!i)return;const a=i.closest('a[href^="#"]');if(!a)return;const g=a.getAttribute("href");d(g)};return document.addEventListener("click",r,!0),window.addEventListener("hashchange",()=>{d(window.location.hash)}),window.addEventListener("load",()=>{d(window.location.hash)}),{handleManualTrigger:n=>{d(n)}}}function ce(){const o=document.querySelector(".js-walking-person"),s=document.querySelector(".js-circle"),l=document.querySelector(".js-floor");if(!o||!s||!l)return;let c="idle",d=-1;const r=280,n=18e3,i=r/360*n,a=2e3,g=.4,m=6,p=()=>o.getBoundingClientRect(),u={y:0,v:0};function C(){const h=s.getBoundingClientRect();return h.top+h.height-85}function M(h){const P=(h-S)%n;return P>=i-120&&P<=i+120}function e(){c="idle",u.y=0,u.v=0,o.style.transform="translate(-50%, 0)"}function A(h){o.style.transform=`translate(-50%, ${h}px)`}const S=performance.now();let v=S;function O(h){const P=Math.min(32,h-v)/1e3;if(v=h,c==="idle"){const L=Math.floor((h-S)/n);M(h)&&L!==d&&(c="falling",d=L,u.y=0,u.v=0)}else if(c==="falling"){const L=p();u.v+=a*P,u.y+=u.v*P;const D=C();L.bottom+u.y>=D&&(u.y=D-L.bottom,u.v=-u.v*g,Math.abs(u.v)<m&&(c="settled",u.v=0,u.y=D-L.bottom)),A(u.y)}requestAnimationFrame(O)}e(),requestAnimationFrame(h=>{v=h,O(h)})}(()=>{const o=document.querySelector(".js-header"),s=document.querySelector(".js-logo"),l=s?.querySelector(".js-logo-img"),c=document.querySelector(".js-menu-toggle"),d=document.querySelector(".js-nav-circular"),r=document.querySelector(".js-hero-backdrop"),n=document.querySelector(".js-hero-scroll"),i=n?.querySelector(".js-hero-viewport")||null;if(!o||!s||!l||!c||!d)return;c.parentElement!==document.body&&document.body.appendChild(c),c.setAttribute("aria-expanded","false");const a=se(n,i),g=oe(s,l,r),m=le(),{evaluateMenuToggleContrast:p}=ie(d,c,o,m,r)||{};ae(),ce();let u=window.pageYOffset,C=!1;const M=()=>document.body.classList.contains("nav-open"),e=()=>{const v=window.pageYOffset,O=v-u;M()||(O>6&&v>120?o.setAttribute("data-hidden","true"):(O<-6||v<=120)&&o.setAttribute("data-hidden","false")),u=v,a&&a(),g&&g(),p&&p()},A=()=>{C||(window.requestAnimationFrame(()=>{e(),C=!1}),C=!0)};window.addEventListener("scroll",A,{passive:!0}),window.addEventListener("resize",()=>window.requestAnimationFrame(()=>{a&&a(),g&&g(),p&&p()}));const S=()=>{a&&a(),g&&g(),p&&p()};document.addEventListener("DOMContentLoaded",S),window.addEventListener("load",S),S()})();
//# sourceMappingURL=index-DdQUB4Vz.js.map
