(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))d(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function l(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerPolicy&&(r.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?r.credentials="include":c.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(c){if(c.ep)return;c.ep=!0;const r=l(c);fetch(c.href,r)}})();const Z=s=>Math.max(0,Math.min(1,s)),Y=s=>{if(!s)return null;const n=s.match(/rgba?\(([^)]+)\)/);if(!n)return null;const l=n[1].split(",").map(i=>i.trim());if(l.length<3)return null;const d=Number(l[0]),c=Number(l[1]),r=Number(l[2]),o=l[3]!==void 0?Number(l[3]):1;return[d,c,r,o].some(i=>Number.isNaN(i))?null:{r:d,g:c,b:r,a:o}},H=(s,n=0)=>{if(!s||n>10)return Y(getComputedStyle(document.body).backgroundColor)||{r:255,g:255,b:255,a:1};const l=getComputedStyle(s),d=Y(l.backgroundColor);return d&&d.a>0&&l.backgroundImage==="none"?d:H(s.parentElement,n+1)},ee=(s,n,l=[],d)=>{if(d){const o=d.getBoundingClientRect();if(s>=o.left&&s<=o.right&&n>=o.top&&n<=o.bottom){const i=Y(getComputedStyle(d).backgroundColor);if(i)return i}}const c=[];l.forEach(o=>{o instanceof Element&&(c.push({element:o,previous:o.style.pointerEvents}),o.style.pointerEvents="none")});let r=null;try{r=document.elementFromPoint(s,n)}catch{r=null}finally{c.forEach(({element:o,previous:i})=>{o.style.pointerEvents=i})}return H(r)||H(document.body)},de=(s,n)=>{let l=n-s;for(;l>180;)l-=360;for(;l<-180;)l+=360;return l},I=s=>{const n=(s%360+360)%360;return n>180?n-360:n};function ue(s,n){if(!s||!n)return()=>{};let l=0,d=!1;return()=>{const r=s.getBoundingClientRect(),o=window.innerHeight||n.getBoundingClientRect().height||1,i=Z(-r.top/o);Math.abs(i-l)>.001&&(l=i,s.style.setProperty("--hero-progress",l.toFixed(4)));const a=l>=.98;a!==d&&(d=a,s.classList.toggle("is-released",d),s.classList.toggle("is-dismissed",d))}}function ge(s,n,l){if(!s||!n)return()=>{};let d="default";const c=i=>{const a=n.dataset,p=`src${i.charAt(0).toUpperCase()}${i.slice(1)}`,g=[a[p],a.srcDefault,a.srcLight,a.srcDark].find(u=>typeof u=="string"&&u.trim().length>0);if(!g)return"";try{return new URL(g,window.location.href).href}catch{return g}},r=i=>{const a=c(i);!a||n.src===a||(n.src=a,d=i)};return r("default"),()=>{const i=s.getBoundingClientRect(),a=i.left+i.width/2,p=i.top+i.height/2,f=ee(a,p,[s],l),{r:g,g:u,b:y}=f||{r:255,g:255,b:255},C=(.2126*g+.7152*u+.0722*y)/255;let e;C>=.65?e="light":C<=.35?e="dark":e="mid",s.dataset.theme!==e&&(s.dataset.theme=e);const L=e==="dark"?"dark":e==="light"?"light":"default";d!==L&&r(L)}}function pe(s,n,l,d,c){const r=s,o=r.querySelector("[data-nav-wheel]"),i=r.querySelector(".js-nav-backdrop");if(!o)return;const a=Array.from(o.querySelectorAll("[data-nav-item]"));if(!a.length)return;let p=r.querySelector(".js-nav-guide");p||(p=document.createElement("div"),p.className="nav-circular__guide js-nav-guide",r.appendChild(p));const f={isOpen:!1},g=24,u=360-g,e={rotation:0,lastAngle:0,pointerId:null,isDragging:!1,startRotation:0,didDrag:!1,radius:0,snapTimer:null,hideTimer:null,resizeTimer:null,baseAngles:[],step:0,gapAngle:g,arcSpan:u,targetAngleOffset:165,displayOffset:-8};if(a.length===1)e.baseAngles=[0],e.step=360;else{e.step=-360/a.length,e.baseAngles=a.map((x,S)=>S*e.step);const t=-90,b=(e.baseAngles[a.length-1]??0)+e.step/2;e.rotation=I(t-b+e.targetAngleOffset);const _=e.baseAngles[0],w=I(_+e.rotation),j=I(e.targetAngleOffset-w);e.rotation+=j}let L=null,E=!1;const v=t=>{f.isOpen&&(t.preventDefault(),t.stopPropagation())},M=r.querySelectorAll("[data-nav-close]");n.addEventListener("click",()=>{n.getAttribute("aria-expanded")==="true"?A():P()}),M.forEach(t=>{t.addEventListener("click",()=>{A()})}),r.addEventListener("transitionend",t=>{t.target!==r||t.propertyName!=="opacity"||f.isOpen||(r.hidden=!0,r.setAttribute("aria-hidden","true"))}),o.addEventListener("pointerdown",$),o.addEventListener("pointermove",te),o.addEventListener("pointerup",q),o.addEventListener("pointercancel",q),o.addEventListener("pointerleave",q),o.addEventListener("wheel",oe,{passive:!1}),window.addEventListener("resize",re),a.forEach(t=>{t.addEventListener("click",m=>{if(e.didDrag){e.didDrag=!1;return}m.preventDefault();const b=t.getAttribute("data-target");if(b){const _=document.querySelector(b);_&&(d&&d.handleManualTrigger(b),_.scrollIntoView({behavior:"smooth",block:"start"}))}A()})});const h=()=>{const t=n.getBoundingClientRect();if(!t.width||!t.height)return;const m=document.querySelectorAll("img");let b=0;const _=t.width*t.height;for(const F of m){const R=F.getBoundingClientRect();if(R.bottom>t.top&&R.top<t.bottom&&R.right>t.left&&R.left<t.right){const J=Math.max(t.left,R.left),B=Math.max(t.top,R.top),ie=Math.min(t.right,R.right),ae=Math.min(t.bottom,R.bottom),le=Math.max(0,ie-J),ce=Math.max(0,ae-B),V=le*ce/_;V>b&&(b=V)}}if(b>=.5){n.classList.add("is-inverted");return}const w=t.left+t.width/2,j=t.top+t.height/2,x=ee(w,j,[n],c),{r:S,g:U,b:k}=x||{r:255,g:255,b:255},z=(.2126*S+.7152*U+.0722*k)/255<=.35;n.classList.toggle("is-inverted",z)};function P(){f.isOpen||(L=document.activeElement instanceof HTMLElement?document.activeElement:null,r.hidden=!1,r.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{r.classList.add("is-visible"),requestAnimationFrame(()=>{T(!0)})}),f.isOpen=!0,l.setAttribute("data-hidden","false"),document.body.classList.add("nav-open"),document.body.style.setProperty("overflow","hidden"),r.addEventListener("wheel",v,{passive:!1}),r.addEventListener("touchmove",v,{passive:!1}),o.addEventListener("touchmove",v,{passive:!1}),i?.addEventListener("touchmove",v,{passive:!1}),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label","メニューを閉じる"),h(),X(),document.addEventListener("keydown",O),se())}function A(){f.isOpen&&(f.isOpen=!1,r.classList.remove("is-visible"),r.setAttribute("aria-hidden","true"),n.setAttribute("aria-expanded","false"),n.setAttribute("aria-label","メニューを開く"),document.body.classList.remove("nav-open"),document.body.style.removeProperty("overflow"),r.removeEventListener("wheel",v,{passive:!1}),r.removeEventListener("touchmove",v,{passive:!1}),o.removeEventListener("touchmove",v,{passive:!1}),i?.removeEventListener("touchmove",v,{passive:!1}),document.removeEventListener("keydown",O),o.classList.remove("is-dragging"),e.isDragging=!1,e.pointerId=null,e.didDrag=!1,window.clearTimeout(e.snapTimer),window.clearTimeout(e.resizeTimer),window.clearTimeout(e.hideTimer),e.snapTimer=null,e.resizeTimer=null,e.hideTimer=window.setTimeout(()=>{f.isOpen||(r.hidden=!0,r.setAttribute("aria-hidden","true"))},260),L&&typeof L.focus=="function"?L.focus({preventScroll:!0}):n.focus({preventScroll:!0}),h())}function O(t){if(f.isOpen){if(t.key==="Escape"){t.preventDefault(),A();return}t.key==="ArrowRight"||t.key==="ArrowDown"?(t.preventDefault(),W(-e.step)):(t.key==="ArrowLeft"||t.key==="ArrowUp")&&(t.preventDefault(),W(e.step))}}function $(t){t.pointerType==="mouse"&&t.button!==0||(e.isDragging=!0,e.pointerId=t.pointerId,e.startRotation=e.rotation,e.lastAngle=G(t),e.didDrag=!1,o.classList.add("is-dragging"),o.setPointerCapture&&o.setPointerCapture(t.pointerId))}function te(t){if(!e.isDragging||e.pointerId!==t.pointerId)return;const m=G(t);if(Number.isNaN(m))return;const b=de(e.lastAngle,m);e.rotation+=b,e.lastAngle=m,Math.abs(e.rotation-e.startRotation)>e.step*.08&&(e.didDrag=!0),T()}function q(t){!e.isDragging||e.pointerId!==null&&e.pointerId!==t.pointerId||(e.isDragging=!1,e.pointerId=null,o.classList.remove("is-dragging"),o.releasePointerCapture&&t.pointerId!==void 0&&o.releasePointerCapture(t.pointerId),K(),e.didDrag=!1)}function oe(t){t.preventDefault();const m=Math.abs(t.deltaY)>Math.abs(t.deltaX)?t.deltaY:t.deltaX;Number.isNaN(m)||(e.rotation+=m*.22,e.didDrag=!0,T())}function re(){f.isOpen&&(window.clearTimeout(e.resizeTimer),e.resizeTimer=window.setTimeout(()=>{e.radius=0,T(!0)},140))}function W(t){e.rotation+=t,e.didDrag=!0,T(),ne()}function ne(){window.clearTimeout(e.snapTimer),e.snapTimer=window.setTimeout(()=>{K(),e.didDrag=!1},260)}function K(){const t=N();if(t===null)return;const m=e.baseAngles[t],b=I(m+e.rotation-e.targetAngleOffset);e.rotation-=b,T(),X()}function X(){const t=N(),m=a[t]||a[0];m&&m.focus({preventScroll:!0})}function T(t=!1){const m=o.getBoundingClientRect();if(!m.width||!m.height)return;(t||!e.radius)&&(e.radius=Math.max(m.width/2-100,m.width*.46));const b=N();a.forEach((w,j)=>{const S=(e.baseAngles[j]??0)+e.rotation,U=Math.abs(I(S-e.targetAngleOffset)),k=Math.max(0,1-Math.min(U/(e.step*1.1||1),1)),D=j===b,z=D?1.06:.84+k*.22,F=D?1:.85,R=Math.max(e.radius*.75,e.radius-60),B=`translate(-50%, -40%) rotate(${(S+e.displayOffset).toFixed(3)}deg) translateX(${R.toFixed(3)}px) rotate(${(180-e.displayOffset).toFixed(3)}deg) scale(${z.toFixed(3)})`;w.style.transform=B,w.style.opacity=F,w.style.zIndex=String(100+Math.round(k*100)),w.classList.toggle("is-active",D),w.setAttribute("tabindex",D?"0":"-1")});const _=w=>(w%360+360)%360;if(a.length>=2){const w=e.baseAngles[0]??0,j=_(w+e.rotation+e.displayOffset+e.targetAngleOffset+180),x=_(j+e.step/2),S=_(x+e.gapAngle/2+105);o.style.setProperty("--nav-arc-start",`${S}deg`)}o.style.setProperty("--nav-arc-span",`${e.arcSpan}deg`)}function N(){let t=0,m=Number.POSITIVE_INFINITY;return a.forEach((b,_)=>{const w=e.baseAngles[_]+e.rotation,j=Math.abs(I(w-e.targetAngleOffset));j<m&&(m=j,t=_)}),t}function G(t){const m=o.getBoundingClientRect(),b=m.left+m.width/2,_=m.top+m.height/2;return Math.atan2(t.clientY-_,t.clientX-b)*(180/Math.PI)}function se(){if(E||!p)return;const t=window.matchMedia("(max-width: 600px)").matches;p.textContent=t?"左右スワイプで選択、タップで決定、外側タップか×で閉じる":"←/→ で移動、Enterで決定、Escで閉じる",p.classList.add("is-visible"),E=!0,window.setTimeout(()=>{p?.classList.remove("is-visible")},2800)}return{evaluateMenuToggleContrast:h}}function me(){const s=[...document.querySelectorAll(".js-about-heading, .js-about-text, .js-about-image, .js-person-card, .js-note-card")];if(!s.length)return;const n=window.matchMedia("(prefers-reduced-motion: reduce)"),l=document.querySelector('.js-person-card[data-person="haruto"]'),d=document.querySelector('.js-person-card[data-person="riko"]'),c=(i,a,p,f)=>{const g=i.getBoundingClientRect(),u=g.top+g.height/2,y=Math.max(0,u-p);return Z(1-y/f)},r=()=>{if(n.matches||!document.body.classList.contains("has-scroll-reveal")){s.forEach(g=>g.style.removeProperty("--scroll-fade-progress"));return}const i=window.innerHeight||1,a=i*.65,p=Math.max(1,i*.35),f=l&&l.isConnected?c(l,i,a,p):null;s.forEach(g=>{let u;f!==null&&(g===l||g===d)?u=f:u=c(g,i,a,p),g.style.setProperty("--scroll-fade-progress",u.toFixed(3))})},o=()=>{n.matches?(document.body.classList.remove("has-scroll-reveal"),s.forEach(i=>i.style.removeProperty("--scroll-fade-progress"))):(document.body.classList.add("has-scroll-reveal"),r())};o(),n.addEventListener("change",o),window.addEventListener("scroll",()=>{window.requestAnimationFrame(r)},{passive:!0}),window.addEventListener("resize",()=>{window.requestAnimationFrame(r)}),r()}function fe(){const s=Array.from(document.querySelectorAll(".js-person-card")),n=new Map;if(s.length&&n.set("#greatings",{elements:s,timer:null}),!n.size)return null;const l="anchor-jump-visible",d=1200,c=o=>{if(typeof o!="string"||!n.has(o))return;const i=n.get(o);i&&(window.clearTimeout(i.timer),i.elements.forEach(a=>a.classList.add(l)),i.timer=window.setTimeout(()=>{i.elements.forEach(a=>a.classList.remove(l))},d))},r=o=>{const i=o.target instanceof Element?o.target:null;if(!i)return;const a=i.closest('a[href^="#"]');if(!a)return;const p=a.getAttribute("href");c(p)};return document.addEventListener("click",r,!0),window.addEventListener("hashchange",()=>{c(window.location.hash)}),window.addEventListener("load",()=>{c(window.location.hash)}),{handleManualTrigger:o=>{c(o)}}}function he(){const s=document.querySelector(".js-walking-person"),n=document.querySelector(".js-circle"),l=document.querySelector(".js-floor");if(!s||!n||!l)return;let d="idle",c=-1;const r=280,o=18e3,i=r/360*o,a=2e3,p=.4,f=6,g=()=>s.getBoundingClientRect(),u={y:0,v:0};function y(){const h=n.getBoundingClientRect();return h.top+h.height-85}function C(h){const P=(h-E)%o;return P>=i-120&&P<=i+120}function e(){d="idle",u.y=0,u.v=0,s.style.transform="translate(-50%, 0)"}function L(h){s.style.transform=`translate(-50%, ${h}px)`}const E=performance.now();let v=E;function M(h){const P=Math.min(32,h-v)/1e3;if(v=h,d==="idle"){const A=Math.floor((h-E)/o);C(h)&&A!==c&&(d="falling",c=A,u.y=0,u.v=0)}else if(d==="falling"){const A=g();u.v+=a*P,u.y+=u.v*P;const O=y();A.bottom+u.y>=O&&(u.y=O-A.bottom,u.v=-u.v*p,Math.abs(u.v)<f&&(d="settled",u.v=0,u.y=O-A.bottom)),L(u.y)}requestAnimationFrame(M)}e(),requestAnimationFrame(h=>{v=h,M(h)})}const be=""+new URL("scroll-top1-CgsWS1K3.jpg",import.meta.url).href,ve=""+new URL("scroll-top10-BunoDIvd.jpg",import.meta.url).href,we=""+new URL("scroll-top11-_10vZcLd.jpg",import.meta.url).href,ye=""+new URL("scroll-top2-CT1fxgvJ.jpg",import.meta.url).href,_e=""+new URL("scroll-top3-BPFPwaIQ.jpg",import.meta.url).href,Le=""+new URL("scroll-top4-4oN1eBdP.jpg",import.meta.url).href,Ae=""+new URL("scroll-top5-DwRJTbS0.jpg",import.meta.url).href,je=""+new URL("scroll-top6-CVgrdK4h.jpg",import.meta.url).href,Ee=""+new URL("scroll-top7-BufaYcGm.jpg",import.meta.url).href,Re=""+new URL("scroll-top8-BIGnTMBY.jpg",import.meta.url).href,Ce=""+new URL("scroll-top9-e8aKBBR8.jpg",import.meta.url).href,Se=""+new URL("scroll-bottom1-RDSkzi-1.jpg",import.meta.url).href,Me=""+new URL("scroll-bottom10-DjvzB5ID.jpg",import.meta.url).href,Pe=""+new URL("scroll-bottom11-CQWFP7qw.jpg",import.meta.url).href,Oe=""+new URL("scroll-bottom2-BcuuW2Sv.jpg",import.meta.url).href,Te=""+new URL("scroll-bottom3-EhPToCU2.jpg",import.meta.url).href,Ie=""+new URL("scroll-bottom4-CHFjmPk_.jpg",import.meta.url).href,xe=""+new URL("scroll-bottom5-I5bJn0Jc.jpg",import.meta.url).href,De=""+new URL("scroll-bottom6-zSYWQjBJ.jpg",import.meta.url).href,ke=""+new URL("scroll-bottom7-CHaDkbPm.jpg",import.meta.url).href,qe=""+new URL("scroll-bottom8-az5dak3n.jpg",import.meta.url).href,Ne=""+new URL("scroll-bottom9-DA3k6_TO.jpg",import.meta.url).href;let Q=!1;function Ue(){if(Q)return;const s=document.querySelector(".js-scroll-top .js-scroll-track"),n=document.querySelector(".js-scroll-bottom .js-scroll-track");if(!s||!n){console.warn("Scroll tracks not found");return}const l=Object.assign({"../../../images/scroll-top/scroll-top1.jpg":be,"../../../images/scroll-top/scroll-top10.jpg":ve,"../../../images/scroll-top/scroll-top11.jpg":we,"../../../images/scroll-top/scroll-top2.jpg":ye,"../../../images/scroll-top/scroll-top3.jpg":_e,"../../../images/scroll-top/scroll-top4.jpg":Le,"../../../images/scroll-top/scroll-top5.jpg":Ae,"../../../images/scroll-top/scroll-top6.jpg":je,"../../../images/scroll-top/scroll-top7.jpg":Ee,"../../../images/scroll-top/scroll-top8.jpg":Re,"../../../images/scroll-top/scroll-top9.jpg":Ce}),d=Object.assign({"../../../images/scroll-bottom/scroll-bottom1.jpg":Se,"../../../images/scroll-bottom/scroll-bottom10.jpg":Me,"../../../images/scroll-bottom/scroll-bottom11.jpg":Pe,"../../../images/scroll-bottom/scroll-bottom2.jpg":Oe,"../../../images/scroll-bottom/scroll-bottom3.jpg":Te,"../../../images/scroll-bottom/scroll-bottom4.jpg":Ie,"../../../images/scroll-bottom/scroll-bottom5.jpg":xe,"../../../images/scroll-bottom/scroll-bottom6.jpg":De,"../../../images/scroll-bottom/scroll-bottom7.jpg":ke,"../../../images/scroll-bottom/scroll-bottom8.jpg":qe,"../../../images/scroll-bottom/scroll-bottom9.jpg":Ne}),c=(p,f)=>p.map(([g,u])=>{const y=g.match(f);return{src:u,index:y?Number(y[1]):0}}).sort((g,u)=>g.index-u.index),r=c(Object.entries(l),/scroll-top(\d+)\.jpg$/),o=c(Object.entries(d),/scroll-bottom(\d+)\.jpg$/);if(!r.length||!o.length){console.warn("Scroll images not found");return}const i=2,a=(p,f,g)=>{for(let u=0;u<i;u++)f.forEach(({src:y,index:C})=>{const e=document.createElement("img");e.src=y,e.alt=`${g} ${C}`,e.loading="lazy",p.appendChild(e)})};a(s,r,"Scroll top"),a(n,o,"Scroll bottom"),Q=!0}(()=>{const s=document.querySelector(".js-header"),n=document.querySelector(".js-logo"),l=n?.querySelector(".js-logo-img"),d=document.querySelector(".js-menu-toggle"),c=document.querySelector(".js-nav-circular"),r=document.querySelector(".js-hero-backdrop"),o=document.querySelector(".js-hero-scroll"),i=o?.querySelector(".js-hero-viewport")||null;if(!s||!n||!l||!d||!c)return;d.parentElement!==document.body&&document.body.appendChild(d),d.setAttribute("aria-expanded","false");const a=ue(o,i),p=ge(n,l,r),f=fe(),{evaluateMenuToggleContrast:g}=pe(c,d,s,f,r)||{};me(),he();let u=window.pageYOffset,y=!1;const C=()=>document.body.classList.contains("nav-open"),e=()=>{const v=window.pageYOffset,M=v-u;C()||(M>6&&v>120?s.setAttribute("data-hidden","true"):(M<-6||v<=120)&&s.setAttribute("data-hidden","false")),u=v,a&&a(),p&&p(),g&&g()},L=()=>{y||(window.requestAnimationFrame(()=>{e(),y=!1}),y=!0)};window.addEventListener("scroll",L,{passive:!0}),window.addEventListener("resize",()=>window.requestAnimationFrame(()=>{a&&a(),p&&p(),g&&g()}));const E=()=>{a&&a(),p&&p(),g&&g(),Ue()};document.addEventListener("DOMContentLoaded",E),window.addEventListener("load",E),E()})();
//# sourceMappingURL=index-_3Uiv0Di.js.map
