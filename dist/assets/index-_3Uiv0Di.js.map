{"version":3,"file":"index-_3Uiv0Di.js","sources":["../../src/js/modules/utils.js","../../src/js/modules/hero.js","../../src/js/modules/logo.js","../../src/js/modules/navigation.js","../../src/js/modules/scroll-reveal.js","../../src/js/modules/anchor.js","../../src/js/modules/fall-sim.js","../../images/scroll-top/scroll-top1.jpg","../../images/scroll-top/scroll-top10.jpg","../../images/scroll-top/scroll-top11.jpg","../../images/scroll-top/scroll-top2.jpg","../../images/scroll-top/scroll-top3.jpg","../../images/scroll-top/scroll-top4.jpg","../../images/scroll-top/scroll-top5.jpg","../../images/scroll-top/scroll-top6.jpg","../../images/scroll-top/scroll-top7.jpg","../../images/scroll-top/scroll-top8.jpg","../../images/scroll-top/scroll-top9.jpg","../../images/scroll-bottom/scroll-bottom1.jpg","../../images/scroll-bottom/scroll-bottom10.jpg","../../images/scroll-bottom/scroll-bottom11.jpg","../../images/scroll-bottom/scroll-bottom2.jpg","../../images/scroll-bottom/scroll-bottom3.jpg","../../images/scroll-bottom/scroll-bottom4.jpg","../../images/scroll-bottom/scroll-bottom5.jpg","../../images/scroll-bottom/scroll-bottom6.jpg","../../images/scroll-bottom/scroll-bottom7.jpg","../../images/scroll-bottom/scroll-bottom8.jpg","../../images/scroll-bottom/scroll-bottom9.jpg","../../src/js/modules/image-scroll.js","../../src/js/main.js"],"sourcesContent":["export const clamp01 = (value) => Math.max(0, Math.min(1, value));\n\nexport const parseRGB = (value) => {\n  if (!value) return null;\n  const match = value.match(/rgba?\\(([^)]+)\\)/);\n  if (!match) return null;\n  const parts = match[1].split(',').map((item) => item.trim());\n  if (parts.length < 3) return null;\n  const r = Number(parts[0]);\n  const g = Number(parts[1]);\n  const b = Number(parts[2]);\n  const a = parts[3] !== undefined ? Number(parts[3]) : 1;\n  if ([r, g, b, a].some((component) => Number.isNaN(component))) {\n    return null;\n  }\n  return { r, g, b, a };\n};\n\nexport const resolveBackgroundColor = (element, depth = 0) => {\n  if (!element || depth > 10) {\n    return parseRGB(getComputedStyle(document.body).backgroundColor) || { r: 255, g: 255, b: 255, a: 1 };\n  }\n\n  const style = getComputedStyle(element);\n  const color = parseRGB(style.backgroundColor);\n  if (color && color.a > 0 && style.backgroundImage === 'none') {\n    return color;\n  }\n  return resolveBackgroundColor(element.parentElement, depth + 1);\n};\n\nexport const sampleColorAtPoint = (x, y, ignoreElements = [], heroBackdrop) => {\n  if (heroBackdrop) {\n    const heroRect = heroBackdrop.getBoundingClientRect();\n    if (x >= heroRect.left && x <= heroRect.right && y >= heroRect.top && y <= heroRect.bottom) {\n      const backdropColor = parseRGB(getComputedStyle(heroBackdrop).backgroundColor);\n      if (backdropColor) {\n        return backdropColor;\n      }\n    }\n  }\n\n  const suppressed = [];\n  ignoreElements.forEach((element) => {\n    if (!(element instanceof Element)) {\n      return;\n    }\n    suppressed.push({ element, previous: element.style.pointerEvents });\n    element.style.pointerEvents = 'none';\n  });\n\n  let elementBeneath = null;\n  try {\n    elementBeneath = document.elementFromPoint(x, y);\n  } catch (error) {\n    elementBeneath = null;\n  } finally {\n    suppressed.forEach(({ element, previous }) => {\n      element.style.pointerEvents = previous;\n    });\n  }\n\n  return resolveBackgroundColor(elementBeneath) || resolveBackgroundColor(document.body);\n};\n\nexport const shortestAngle = (from, to) => {\n  let diff = to - from;\n  while (diff > 180) diff -= 360;\n  while (diff < -180) diff += 360;\n  return diff;\n};\n\nexport const normalizeAngle = (angle) => {\n  const normalized = ((angle % 360) + 360) % 360;\n  return normalized > 180 ? normalized - 360 : normalized;\n};\n","import { clamp01 } from './utils.js';\n\nexport function initializeHero(heroScrollSection, heroViewport) {\n  if (!heroScrollSection || !heroViewport) {\n    return () => {}; // Return no-op if elements missing\n  }\n\n  let heroProgress = 0;\n  let heroReleased = false;\n\n  const updateHeroProgress = () => {\n    const sectionRect = heroScrollSection.getBoundingClientRect();\n    const viewportHeight = window.innerHeight || heroViewport.getBoundingClientRect().height || 1;\n    const nextProgress = clamp01(-sectionRect.top / viewportHeight);\n\n    if (Math.abs(nextProgress - heroProgress) > 0.001) {\n      heroProgress = nextProgress;\n      heroScrollSection.style.setProperty('--hero-progress', heroProgress.toFixed(4));\n    }\n\n    const shouldRelease = heroProgress >= 0.98;\n    if (shouldRelease !== heroReleased) {\n      heroReleased = shouldRelease;\n      heroScrollSection.classList.toggle('is-released', heroReleased);\n      heroScrollSection.classList.toggle('is-dismissed', heroReleased);\n    }\n  };\n\n  return updateHeroProgress;\n}\n","import { sampleColorAtPoint } from './utils.js';\n\nexport function initializeLogo(logo, logoImg, heroBackdrop) {\n  if (!logo || !logoImg) return () => {};\n\n  let currentLogoMode = 'default';\n\n  const resolveLogoAsset = (mode) => {\n    const dataset = logoImg.dataset;\n    const primaryKey = `src${mode.charAt(0).toUpperCase()}${mode.slice(1)}`;\n    const candidates = [dataset[primaryKey], dataset.srcDefault, dataset.srcLight, dataset.srcDark];\n    const assetPath = candidates.find((value) => typeof value === 'string' && value.trim().length > 0);\n    if (!assetPath) return '';\n    try {\n      return new URL(assetPath, window.location.href).href;\n    } catch (error) {\n      return assetPath;\n    }\n  };\n\n  const setLogoSourceForMode = (mode) => {\n    const absolutePath = resolveLogoAsset(mode);\n    if (!absolutePath || logoImg.src === absolutePath) return;\n    logoImg.src = absolutePath;\n    currentLogoMode = mode;\n  };\n\n  // Initial set\n  setLogoSourceForMode('default');\n\n  const evaluateLogoContrast = () => {\n    const rect = logo.getBoundingClientRect();\n    const sampleX = rect.left + rect.width / 2;\n    const sampleY = rect.top + rect.height / 2;\n\n    const sampledColor = sampleColorAtPoint(sampleX, sampleY, [logo], heroBackdrop);\n\n    const { r, g, b } = sampledColor || { r: 255, g: 255, b: 255, a: 1 };\n    const luminance = (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;\n\n    let theme;\n    if (luminance >= 0.65) {\n      theme = 'light';\n    } else if (luminance <= 0.35) {\n      theme = 'dark';\n    } else {\n      theme = 'mid';\n    }\n\n    if (logo.dataset.theme !== theme) {\n      logo.dataset.theme = theme;\n    }\n\n    const nextMode = theme === 'dark' ? 'dark' : theme === 'light' ? 'light' : 'default';\n    if (currentLogoMode !== nextMode) {\n      setLogoSourceForMode(nextMode);\n    }\n  };\n\n  return evaluateLogoContrast;\n}\n","import { normalizeAngle, shortestAngle, sampleColorAtPoint } from './utils.js';\n\nexport function initializeCircularNav(circularNav, menuToggleButton, header, anchorRevealController, heroBackdrop) {\n  const overlay = circularNav;\n  const wheel = overlay.querySelector('[data-nav-wheel]');\n  const backdrop = overlay.querySelector('.js-nav-backdrop');\n  if (!wheel) return;\n\n  const items = Array.from(wheel.querySelectorAll('[data-nav-item]'));\n  if (!items.length) return;\n\n  // ガイド要素の生成（初回のみ数秒表示）\n  let guide = overlay.querySelector('.js-nav-guide');\n  if (!guide) {\n    guide = document.createElement('div');\n    guide.className = 'nav-circular__guide js-nav-guide';\n    overlay.appendChild(guide);\n  }\n\n  const menuState = { isOpen: false };\n  const gapAngle = 24;\n  const arcSpan = 360 - gapAngle;\n  const targetAngleOffset = 165;\n  const displayOffset = -8;\n\n  const navState = {\n    rotation: 0,\n    lastAngle: 0,\n    pointerId: null,\n    isDragging: false,\n    startRotation: 0,\n    didDrag: false,\n    radius: 0,\n    snapTimer: null,\n    hideTimer: null,\n    resizeTimer: null,\n    baseAngles: [],\n    step: 0,\n    gapAngle,\n    arcSpan,\n    targetAngleOffset,\n    displayOffset,\n  };\n\n  if (items.length === 1) {\n    navState.baseAngles = [0];\n    navState.step = 360;\n  } else {\n    navState.step = -360 / items.length;\n    navState.baseAngles = items.map((_, index) => index * navState.step);\n    const desiredGapCenter = -90;\n    const lastBaseAngle = navState.baseAngles[items.length - 1] ?? 0;\n    const gapCenterWithoutRotation = lastBaseAngle + navState.step / 2;\n    navState.rotation = normalizeAngle(desiredGapCenter - gapCenterWithoutRotation + navState.targetAngleOffset);\n\n    const firstTargetAngle = navState.baseAngles[0];\n    const currentAngle = normalizeAngle(firstTargetAngle + navState.rotation);\n    const correction = normalizeAngle(navState.targetAngleOffset - currentAngle);\n    navState.rotation += correction;\n  }\n\n  let lastFocused = null;\n  let guideShown = false;\n  const preventScroll = event => {\n    if (!menuState.isOpen) return;\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const closeTargets = overlay.querySelectorAll('[data-nav-close]');\n\n  menuToggleButton.addEventListener('click', () => {\n    const expanded = menuToggleButton.getAttribute('aria-expanded') === 'true';\n    if (expanded) {\n      closeNav();\n    } else {\n      openNav();\n    }\n  });\n\n  closeTargets.forEach((element) => {\n    element.addEventListener('click', () => {\n      closeNav();\n    });\n  });\n\n  overlay.addEventListener('transitionend', (event) => {\n    if (event.target !== overlay || event.propertyName !== 'opacity') return;\n    if (!menuState.isOpen) {\n      overlay.hidden = true;\n      overlay.setAttribute('aria-hidden', 'true');\n    }\n  });\n\n  wheel.addEventListener('pointerdown', handlePointerDown);\n  wheel.addEventListener('pointermove', handlePointerMove);\n  wheel.addEventListener('pointerup', handlePointerUp);\n  wheel.addEventListener('pointercancel', handlePointerUp);\n  wheel.addEventListener('pointerleave', handlePointerUp);\n  wheel.addEventListener('wheel', handleWheel, { passive: false });\n\n  window.addEventListener('resize', handleResize);\n\n  items.forEach((item) => {\n    item.addEventListener('click', (event) => {\n      if (navState.didDrag) {\n        navState.didDrag = false;\n        return;\n      }\n\n      event.preventDefault();\n      const targetSelector = item.getAttribute('data-target');\n      if (targetSelector) {\n        const target = document.querySelector(targetSelector);\n        if (target) {\n          if (anchorRevealController) {\n            anchorRevealController.handleManualTrigger(targetSelector);\n          }\n          target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      }\n      closeNav();\n    });\n  });\n\n  const evaluateMenuToggleContrast = () => {\n    const rect = menuToggleButton.getBoundingClientRect();\n    if (!rect.width || !rect.height) {\n      return;\n    }\n\n    // 1. Check for overlap with images\n    // Get all images in the viewport that could potentially overlap\n    // We select all imgs. For optimization, we could limit this scope if needed,\n    // but for now, checking all visible images is robust.\n    const images = document.querySelectorAll('img');\n    let maxOverlapRatio = 0;\n\n    const buttonArea = rect.width * rect.height;\n\n    for (const img of images) {\n      const imgRect = img.getBoundingClientRect();\n\n      // Check if image is visible and intersects with the button\n      if (\n        imgRect.bottom > rect.top &&\n        imgRect.top < rect.bottom &&\n        imgRect.right > rect.left &&\n        imgRect.left < rect.right\n      ) {\n        // Calculate intersection rectangle\n        const intersectLeft = Math.max(rect.left, imgRect.left);\n        const intersectTop = Math.max(rect.top, imgRect.top);\n        const intersectRight = Math.min(rect.right, imgRect.right);\n        const intersectBottom = Math.min(rect.bottom, imgRect.bottom);\n\n        const intersectWidth = Math.max(0, intersectRight - intersectLeft);\n        const intersectHeight = Math.max(0, intersectBottom - intersectTop);\n        const intersectArea = intersectWidth * intersectHeight;\n\n        const overlapRatio = intersectArea / buttonArea;\n        if (overlapRatio > maxOverlapRatio) {\n          maxOverlapRatio = overlapRatio;\n        }\n      }\n    }\n\n    // If overlap is more than 1/2 (0.5), force inverted (white)\n    if (maxOverlapRatio >= 0.5) {\n      menuToggleButton.classList.add('is-inverted');\n      return;\n    }\n\n    // 2. Fallback to existing background color sampling\n    const sampleX = rect.left + rect.width / 2;\n    const sampleY = rect.top + rect.height / 2;\n\n    // Pass menuToggleButton as ignore element and heroBackdrop for background check\n    const sampledColor = sampleColorAtPoint(sampleX, sampleY, [menuToggleButton], heroBackdrop);\n    const { r, g, b } = sampledColor || { r: 255, g: 255, b: 255, a: 1 };\n    const luminance = (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;\n    const shouldInvert = luminance <= 0.35;\n    menuToggleButton.classList.toggle('is-inverted', shouldInvert);\n  };\n\n  function openNav() {\n    if (menuState.isOpen) return;\n    lastFocused = document.activeElement instanceof HTMLElement ? document.activeElement : null;\n    overlay.hidden = false;\n    overlay.setAttribute('aria-hidden', 'false');\n    requestAnimationFrame(() => {\n      overlay.classList.add('is-visible');\n      requestAnimationFrame(() => {\n        updateWheel(true);\n      });\n    });\n    menuState.isOpen = true;\n    header.setAttribute('data-hidden', 'false');\n    document.body.classList.add('nav-open');\n    document.body.style.setProperty('overflow', 'hidden');\n    overlay.addEventListener('wheel', preventScroll, { passive: false });\n    overlay.addEventListener('touchmove', preventScroll, { passive: false });\n    wheel.addEventListener('touchmove', preventScroll, { passive: false });\n    backdrop?.addEventListener('touchmove', preventScroll, { passive: false });\n    menuToggleButton.setAttribute('aria-expanded', 'true');\n    menuToggleButton.setAttribute('aria-label', 'メニューを閉じる');\n    evaluateMenuToggleContrast();\n    focusActiveItem();\n    document.addEventListener('keydown', handleKeydown);\n    showGuideOnce();\n  }\n\n  function closeNav() {\n    if (!menuState.isOpen) return;\n    menuState.isOpen = false;\n    overlay.classList.remove('is-visible');\n    overlay.setAttribute('aria-hidden', 'true');\n    menuToggleButton.setAttribute('aria-expanded', 'false');\n    menuToggleButton.setAttribute('aria-label', 'メニューを開く');\n    document.body.classList.remove('nav-open');\n    document.body.style.removeProperty('overflow');\n    overlay.removeEventListener('wheel', preventScroll, { passive: false });\n    overlay.removeEventListener('touchmove', preventScroll, { passive: false });\n    wheel.removeEventListener('touchmove', preventScroll, { passive: false });\n    backdrop?.removeEventListener('touchmove', preventScroll, { passive: false });\n    document.removeEventListener('keydown', handleKeydown);\n    wheel.classList.remove('is-dragging');\n    navState.isDragging = false;\n    navState.pointerId = null;\n    navState.didDrag = false;\n    window.clearTimeout(navState.snapTimer);\n    window.clearTimeout(navState.resizeTimer);\n    window.clearTimeout(navState.hideTimer);\n    navState.snapTimer = null;\n    navState.resizeTimer = null;\n    navState.hideTimer = window.setTimeout(() => {\n      if (!menuState.isOpen) {\n        overlay.hidden = true;\n        overlay.setAttribute('aria-hidden', 'true');\n      }\n    }, 260);\n\n    if (lastFocused && typeof lastFocused.focus === 'function') {\n      lastFocused.focus({ preventScroll: true });\n    } else {\n      menuToggleButton.focus({ preventScroll: true });\n    }\n    evaluateMenuToggleContrast();\n  }\n\n  function handleKeydown(event) {\n    if (!menuState.isOpen) return;\n    if (event.key === 'Escape') {\n      event.preventDefault();\n      closeNav();\n      return;\n    }\n\n    if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {\n      event.preventDefault();\n      rotateBy(-navState.step);\n    } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {\n      event.preventDefault();\n      rotateBy(navState.step);\n    }\n  }\n\n  function handlePointerDown(event) {\n    if (event.pointerType === 'mouse' && event.button !== 0) {\n      return;\n    }\n\n    navState.isDragging = true;\n    navState.pointerId = event.pointerId;\n    navState.startRotation = navState.rotation;\n    navState.lastAngle = getPointerAngle(event);\n    navState.didDrag = false;\n    wheel.classList.add('is-dragging');\n    if (wheel.setPointerCapture) {\n      wheel.setPointerCapture(event.pointerId);\n    }\n  }\n\n  function handlePointerMove(event) {\n    if (!navState.isDragging || navState.pointerId !== event.pointerId) {\n      return;\n    }\n\n    const angle = getPointerAngle(event);\n    if (Number.isNaN(angle)) return;\n\n    const delta = shortestAngle(navState.lastAngle, angle);\n    navState.rotation += delta;\n    navState.lastAngle = angle;\n\n    if (Math.abs(navState.rotation - navState.startRotation) > navState.step * 0.08) {\n      navState.didDrag = true;\n    }\n\n    updateWheel();\n  }\n\n  function handlePointerUp(event) {\n    if (!navState.isDragging || (navState.pointerId !== null && navState.pointerId !== event.pointerId)) {\n      return;\n    }\n\n    navState.isDragging = false;\n    navState.pointerId = null;\n    wheel.classList.remove('is-dragging');\n\n    if (wheel.releasePointerCapture && event.pointerId !== undefined) {\n      wheel.releasePointerCapture(event.pointerId);\n    }\n\n    snapToActive();\n    navState.didDrag = false;\n  }\n\n  function handleWheel(event) {\n    event.preventDefault();\n    const delta = Math.abs(event.deltaY) > Math.abs(event.deltaX) ? event.deltaY : event.deltaX;\n    if (Number.isNaN(delta)) return;\n\n    navState.rotation += delta * 0.22;\n    navState.didDrag = true;\n    updateWheel();\n  }\n\n  function handleResize() {\n    if (!menuState.isOpen) return;\n    window.clearTimeout(navState.resizeTimer);\n    navState.resizeTimer = window.setTimeout(() => {\n      navState.radius = 0;\n      updateWheel(true);\n    }, 140);\n  }\n\n  function rotateBy(amount) {\n    navState.rotation += amount;\n    navState.didDrag = true;\n    updateWheel();\n    scheduleSnap();\n  }\n\n  function scheduleSnap() {\n    window.clearTimeout(navState.snapTimer);\n    navState.snapTimer = window.setTimeout(() => {\n      snapToActive();\n      navState.didDrag = false;\n    }, 260);\n  }\n\n  function snapToActive() {\n    const index = getActiveItemIndex();\n    if (index === null) return;\n\n    const targetAngle = navState.baseAngles[index];\n    const current = normalizeAngle(targetAngle + navState.rotation - navState.targetAngleOffset);\n    navState.rotation -= current;\n    updateWheel();\n    focusActiveItem();\n  }\n\n  function focusActiveItem() {\n    const index = getActiveItemIndex();\n    const item = items[index] || items[0];\n    if (item) {\n      item.focus({ preventScroll: true });\n    }\n  }\n\n  function updateWheel(force = false) {\n    const rect = wheel.getBoundingClientRect();\n    if (!rect.width || !rect.height) {\n      return;\n    }\n\n    if (force || !navState.radius) {\n      navState.radius = Math.max(rect.width / 2 - 100, rect.width * 0.46);\n    }\n\n    const activeIndex = getActiveItemIndex();\n\n    items.forEach((item, index) => {\n      const baseAngle = navState.baseAngles[index] ?? 0;\n      const angle = baseAngle + navState.rotation;\n      const distance = Math.abs(normalizeAngle(angle - navState.targetAngleOffset));\n\n      const proximity = Math.max(0, 1 - Math.min(distance / (navState.step * 1.1 || 1), 1));\n      const isActive = index === activeIndex;\n      \n      // Active item always gets maximum scale (1.06), others are scaled by proximity\n      const scale = isActive ? 1.06 : (0.84 + proximity * 0.22);\n      const opacity = isActive ? 1 : 0.85;\n\n      const itemDistance = Math.max(navState.radius * 0.75, navState.radius - 60);\n      const displayAngle = angle + navState.displayOffset;\n      const transform = `translate(-50%, -40%) rotate(${displayAngle.toFixed(3)}deg) translateX(${itemDistance.toFixed(3)}px) rotate(${(180 - navState.displayOffset).toFixed(3)}deg) scale(${scale.toFixed(3)})`;\n      item.style.transform = transform;\n      item.style.opacity = opacity;\n      item.style.zIndex = String(100 + Math.round(proximity * 100));\n      item.classList.toggle('is-active', isActive);\n      item.setAttribute('tabindex', isActive ? '0' : '-1');\n    });\n\n    const toPositive = (value) => ((value % 360) + 360) % 360;\n    if (items.length >= 2) {\n      // ギャップをアイテム0→1の中間（実表示角度）に固定\n      // テキスト側は translate(-50%, -40%) rotate(displayAngle) translateX(...) rotate(180deg) scale(...)\n      // なので、displayOffset + targetAngleOffset + 180deg をマスク計算にも反映させる\n      const base0 = navState.baseAngles[0] ?? 0;\n      const displayAngle0 = toPositive(base0 + navState.rotation + navState.displayOffset + navState.targetAngleOffset + 180);\n      const gapCenter = toPositive(displayAngle0 + navState.step / 2);\n      const arcStart = toPositive(gapCenter + navState.gapAngle / 2 + 105);\n      wheel.style.setProperty('--nav-arc-start', `${arcStart}deg`);\n    }\n\n    wheel.style.setProperty('--nav-arc-span', `${navState.arcSpan}deg`);\n  }\n\n  function getActiveItemIndex() {\n    let indexOfActive = 0;\n    let minDistance = Number.POSITIVE_INFINITY;\n\n    items.forEach((_, index) => {\n      const angle = navState.baseAngles[index] + navState.rotation;\n      const distance = Math.abs(normalizeAngle(angle - navState.targetAngleOffset));\n      if (distance < minDistance) {\n        minDistance = distance;\n        indexOfActive = index;\n      }\n    });\n\n    return indexOfActive;\n  }\n\n  function getPointerAngle(event) {\n    const rect = wheel.getBoundingClientRect();\n    const cx = rect.left + rect.width / 2;\n    const cy = rect.top + rect.height / 2;\n    const radians = Math.atan2(event.clientY - cy, event.clientX - cx);\n    return radians * (180 / Math.PI);\n  }\n\n  function showGuideOnce() {\n    if (guideShown || !guide) return;\n    const isMobile = window.matchMedia('(max-width: 600px)').matches;\n    guide.textContent = isMobile\n      ? '左右スワイプで選択、タップで決定、外側タップか×で閉じる'\n      : '←/→ で移動、Enterで決定、Escで閉じる';\n    guide.classList.add('is-visible');\n    guideShown = true;\n    window.setTimeout(() => {\n      guide?.classList.remove('is-visible');\n    }, 2800);\n  }\n\n  return {\n    evaluateMenuToggleContrast\n  };\n}\n","import { clamp01 } from './utils.js';\n\nexport function initializeScrollReveal() {\n  const elementsToReveal = [\n    ...document.querySelectorAll('.js-about-heading, .js-about-text, .js-about-image, .js-person-card, .js-note-card'),\n  ];\n  \n  if (!elementsToReveal.length) {\n    return;\n  }\n\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');\n  const harutoElement = document.querySelector('.js-person-card[data-person=\"haruto\"]');\n  const rikoElement = document.querySelector('.js-person-card[data-person=\"riko\"]');\n\n  const computeProgress = (element, viewportHeight, targetY, range) => {\n    const rect = element.getBoundingClientRect();\n    const centerY = rect.top + rect.height / 2;\n    const distanceBelowCenter = Math.max(0, centerY - targetY);\n    return clamp01(1 - distanceBelowCenter / range);\n  };\n\n  const updateFade = () => {\n    if (prefersReducedMotion.matches || !document.body.classList.contains('has-scroll-reveal')) {\n      elementsToReveal.forEach((target) => target.style.removeProperty('--scroll-fade-progress'));\n      return;\n    }\n\n    const viewportHeight = window.innerHeight || 1;\n    const targetY = viewportHeight * 0.65;\n    const range = Math.max(1, viewportHeight * 0.35);\n\n    const sharedProgress =\n      harutoElement && harutoElement.isConnected\n        ? computeProgress(harutoElement, viewportHeight, targetY, range)\n        : null;\n\n    elementsToReveal.forEach((target) => {\n      let progress;\n      if (sharedProgress !== null && (target === harutoElement || target === rikoElement)) {\n        progress = sharedProgress;\n      } else {\n        progress = computeProgress(target, viewportHeight, targetY, range);\n      }\n      target.style.setProperty('--scroll-fade-progress', progress.toFixed(3));\n    });\n  };\n\n  const applyMotionPreference = () => {\n    if (prefersReducedMotion.matches) {\n      document.body.classList.remove('has-scroll-reveal');\n      elementsToReveal.forEach((target) => target.style.removeProperty('--scroll-fade-progress'));\n    } else {\n      document.body.classList.add('has-scroll-reveal');\n      updateFade();\n    }\n  };\n\n  applyMotionPreference();\n  prefersReducedMotion.addEventListener('change', applyMotionPreference);\n  window.addEventListener('scroll', () => {\n    window.requestAnimationFrame(updateFade);\n  }, { passive: true });\n  window.addEventListener('resize', () => {\n    window.requestAnimationFrame(updateFade);\n  });\n  updateFade();\n}\n","export function initializeAnchorRevealOverride() {\n  const greetingsElements = Array.from(document.querySelectorAll('.js-person-card'));\n  const anchorMap = new Map();\n  if (greetingsElements.length) {\n    anchorMap.set('#greatings', { elements: greetingsElements, timer: null });\n  }\n  if (!anchorMap.size) {\n    return null;\n  }\n\n  const ACTIVE_CLASS = 'anchor-jump-visible';\n  const HOLD_DURATION = 1200;\n\n  const applyForSelector = (selector) => {\n    if (typeof selector !== 'string' || !anchorMap.has(selector)) {\n      return;\n    }\n    const entry = anchorMap.get(selector);\n    if (!entry) return;\n    window.clearTimeout(entry.timer);\n    entry.elements.forEach((element) => element.classList.add(ACTIVE_CLASS));\n    entry.timer = window.setTimeout(() => {\n      entry.elements.forEach((element) => element.classList.remove(ACTIVE_CLASS));\n    }, HOLD_DURATION);\n  };\n\n  const handleAnchorClick = (event) => {\n    const target = event.target instanceof Element ? event.target : null;\n    if (!target) return;\n    const anchor = target.closest('a[href^=\"#\"]');\n    if (!anchor) return;\n    const href = anchor.getAttribute('href');\n    applyForSelector(href);\n  };\n\n  document.addEventListener('click', handleAnchorClick, true);\n  window.addEventListener('hashchange', () => {\n    applyForSelector(window.location.hash);\n  });\n  window.addEventListener('load', () => {\n    applyForSelector(window.location.hash);\n  });\n\n  return {\n    handleManualTrigger: (selector) => {\n      applyForSelector(selector);\n    },\n  };\n}\n","export function initializeFallSim() {\n  const ENABLE_FALL_SIM = true;\n  if (!ENABLE_FALL_SIM) return;\n\n  const person = document.querySelector('.js-walking-person');\n  const circle = document.querySelector('.js-circle');\n  const floorEl = document.querySelector('.js-floor');\n  if (!person || !circle || !floorEl) return;\n\n  let fallState = 'idle'; // idle | falling | settled\n  let lastTriggerTurn = -1;\n  const angleOffset = -90; // align 0deg to top if needed\n  const triggerAngle = 280; // 欠けが真下に来る角度をさらに5度遅らせる\n  const triggerBuffer = 6; // tolerance\n  const rotationDurationMs = 18000; // spin-circle 18s\n  const triggerDelayMs = (triggerAngle / 360) * rotationDurationMs;\n  const gravity = 2000; // px/s^2\n  const restitution = 0.4;\n  const stopVelocity = 6;\n  const getPersonRect = () => person.getBoundingClientRect();\n\n  const state = {\n    y: 0,\n    v: 0,\n  };\n\n  function getFloorY() {\n    const rect = circle.getBoundingClientRect();\n    // 円の最下端よりさらに55px上げた位置から、さらに15px上げて合計70px→85px上げた位置を床とする\n    return rect.top + rect.height - 85;\n  }\n\n  function shouldTrigger(now) {\n    const elapsed = (now - startTime) % rotationDurationMs;\n    return elapsed >= triggerDelayMs - 120 && elapsed <= triggerDelayMs + 120;\n  }\n\n  function getAngleProgress(now) {\n    const elapsed = (now - startTime) % rotationDurationMs;\n    const angle = (elapsed / rotationDurationMs) * 360;\n    return ((angle + angleOffset) % 360 + 360) % 360;\n  }\n\n  function resetPerson() {\n    fallState = 'idle';\n    state.y = 0;\n    state.v = 0;\n    person.style.transform = `translate(-50%, 0)`;\n  }\n\n  function setPersonY(y) {\n    person.style.transform = `translate(-50%, ${y}px)`;\n  }\n\n  const startTime = performance.now();\n  let lastTime = startTime;\n  function tick(now) {\n    const dt = Math.min(32, now - lastTime) / 1000;\n    lastTime = now;\n\n    if (fallState === 'idle') {\n      const turn = Math.floor((now - startTime) / rotationDurationMs);\n      if (shouldTrigger(now) && turn !== lastTriggerTurn) {\n        fallState = 'falling';\n        lastTriggerTurn = turn;\n        state.y = 0;\n        state.v = 0;\n      }\n    } else if (fallState === 'falling') {\n      const personRect = getPersonRect();\n      state.v += gravity * dt;\n      state.y += state.v * dt;\n      const floor = getFloorY();\n      const personBottom = personRect.bottom + state.y;\n      if (personBottom >= floor) {\n        // 補正して床位置に固定\n        state.y = floor - personRect.bottom;\n        state.v = -state.v * restitution;\n        if (Math.abs(state.v) < stopVelocity) {\n          fallState = 'settled';\n          state.v = 0;\n          state.y = floor - personRect.bottom;\n        }\n      }\n      setPersonY(state.y);\n    }\n\n    requestAnimationFrame(tick);\n  }\n\n  resetPerson();\n  requestAnimationFrame((t) => {\n    lastTime = t;\n    tick(t);\n  });\n}\n","export default \"__VITE_ASSET__KzNTG$DB__\"","export default \"__VITE_ASSET__DVYZB1HU__\"","export default \"__VITE_ASSET__Cb9SBk4G__\"","export default \"__VITE_ASSET__C168A2Wc__\"","export default \"__VITE_ASSET__DqKH7sEZ__\"","export default \"__VITE_ASSET__FDAZ240___\"","export default \"__VITE_ASSET__Zzn6VZON__\"","export default \"__VITE_ASSET__CEKvsQWo__\"","export default \"__VITE_ASSET__TQy70QJ5__\"","export default \"__VITE_ASSET__C5lfQ6CL__\"","export default \"__VITE_ASSET__DY9RIT1e__\"","export default \"__VITE_ASSET__D1rdS0yX__\"","export default \"__VITE_ASSET__BOvInBc0__\"","export default \"__VITE_ASSET__dk6hrlLq__\"","export default \"__VITE_ASSET__BRJLt5fZ__\"","export default \"__VITE_ASSET__Dx4MZnzD__\"","export default \"__VITE_ASSET__BExgItzE__\"","export default \"__VITE_ASSET__CtS4MQpO__\"","export default \"__VITE_ASSET__BY4w4TiR__\"","export default \"__VITE_ASSET__BWBeYpQ7__\"","export default \"__VITE_ASSET__7DScTCit__\"","export default \"__VITE_ASSET__BaZW04ZU__\"","let isInitialized = false;\n\nexport function initializeImageScroll() {\n  if (isInitialized) return;\n\n  const scrollTopTrack = document.querySelector('.js-scroll-top .js-scroll-track');\n  const scrollBottomTrack = document.querySelector('.js-scroll-bottom .js-scroll-track');\n\n  if (!scrollTopTrack || !scrollBottomTrack) {\n    console.warn('Scroll tracks not found');\n    return;\n  }\n\n  const topImages = import.meta.glob('../../../images/scroll-top/*.jpg', { eager: true, import: 'default' });\n  const bottomImages = import.meta.glob('../../../images/scroll-bottom/*.jpg', { eager: true, import: 'default' });\n\n  const sortByIndex = (entries, pattern) =>\n    entries\n      .map(([path, src]) => {\n        const match = path.match(pattern);\n        return { src, index: match ? Number(match[1]) : 0 };\n      })\n      .sort((a, b) => a.index - b.index);\n\n  const topImageList = sortByIndex(Object.entries(topImages), /scroll-top(\\d+)\\.jpg$/);\n  const bottomImageList = sortByIndex(Object.entries(bottomImages), /scroll-bottom(\\d+)\\.jpg$/);\n\n  if (!topImageList.length || !bottomImageList.length) {\n    console.warn('Scroll images not found');\n    return;\n  }\n\n  const duplicateCount = 2;\n\n  const appendImages = (track, images, altPrefix) => {\n    for (let i = 0; i < duplicateCount; i++) {\n      images.forEach(({ src, index }) => {\n        const img = document.createElement('img');\n        img.src = src;\n        img.alt = `${altPrefix} ${index}`;\n        img.loading = 'lazy';\n        track.appendChild(img);\n      });\n    }\n  };\n\n  appendImages(scrollTopTrack, topImageList, 'Scroll top');\n  appendImages(scrollBottomTrack, bottomImageList, 'Scroll bottom');\n\n  isInitialized = true;\n}\n","import '../css/main.css';\nimport { initializeHero } from './modules/hero.js';\nimport { initializeLogo } from './modules/logo.js';\nimport { initializeCircularNav } from './modules/navigation.js';\nimport { initializeScrollReveal } from './modules/scroll-reveal.js';\nimport { initializeAnchorRevealOverride } from './modules/anchor.js';\nimport { initializeFallSim } from './modules/fall-sim.js';\nimport { initializeImageScroll } from './modules/image-scroll.js';\n\n(() => {\n  const header = document.querySelector('.js-header');\n  const logo = document.querySelector('.js-logo');\n  const logoImg = logo?.querySelector('.js-logo-img');\n  const menuToggleButton = document.querySelector('.js-menu-toggle');\n  const circularNav = document.querySelector('.js-nav-circular');\n  const heroBackdrop = document.querySelector('.js-hero-backdrop');\n  const heroScrollSection = document.querySelector('.js-hero-scroll');\n  const heroViewport = heroScrollSection?.querySelector('.js-hero-viewport') || null;\n\n  if (!header || !logo || !logoImg || !menuToggleButton || !circularNav) {\n    return;\n  }\n\n  if (menuToggleButton.parentElement !== document.body) {\n    document.body.appendChild(menuToggleButton);\n  }\n\n  menuToggleButton.setAttribute('aria-expanded', 'false');\n\n  // Initialize Modules\n  const updateHeroProgress = initializeHero(heroScrollSection, heroViewport);\n  const evaluateLogoContrast = initializeLogo(logo, logoImg, heroBackdrop);\n  const anchorRevealController = initializeAnchorRevealOverride();\n  const { evaluateMenuToggleContrast } = initializeCircularNav(circularNav, menuToggleButton, header, anchorRevealController, heroBackdrop) || {};\n  initializeScrollReveal();\n  initializeFallSim();\n\n  // Scroll Handling\n  let lastScrollY = window.pageYOffset;\n  let ticking = false;\n  // Note: isMenuOpen is tracked inside navigation.js but we need to know it here for header hiding\n  // For now, we'll check the body class or attribute\n  const isMenuOpen = () => document.body.classList.contains('nav-open');\n\n  const handleScroll = () => {\n    const currentY = window.pageYOffset;\n    const delta = currentY - lastScrollY;\n\n    if (!isMenuOpen()) {\n      if (delta > 6 && currentY > 120) {\n        header.setAttribute('data-hidden', 'true');\n      } else if (delta < -6 || currentY <= 120) {\n        header.setAttribute('data-hidden', 'false');\n      }\n    }\n\n    lastScrollY = currentY;\n    if (updateHeroProgress) updateHeroProgress();\n    if (evaluateLogoContrast) evaluateLogoContrast();\n    if (evaluateMenuToggleContrast) evaluateMenuToggleContrast();\n  };\n\n  const onScroll = () => {\n    if (!ticking) {\n      window.requestAnimationFrame(() => {\n        handleScroll();\n        ticking = false;\n      });\n      ticking = true;\n    }\n  };\n\n  window.addEventListener('scroll', onScroll, { passive: true });\n  window.addEventListener(\n    'resize',\n    () =>\n      window.requestAnimationFrame(() => {\n        if (updateHeroProgress) updateHeroProgress();\n        if (evaluateLogoContrast) evaluateLogoContrast();\n        if (evaluateMenuToggleContrast) evaluateMenuToggleContrast();\n      })\n  );\n\n  const runInitialContrastCheck = () => {\n    if (updateHeroProgress) updateHeroProgress();\n    if (evaluateLogoContrast) evaluateLogoContrast();\n    if (evaluateMenuToggleContrast) evaluateMenuToggleContrast();\n    initializeImageScroll();\n  };\n\n  document.addEventListener('DOMContentLoaded', runInitialContrastCheck);\n  window.addEventListener('load', runInitialContrastCheck);\n  runInitialContrastCheck();\n\n})();\n"],"names":["clamp01","value","parseRGB","match","parts","item","r","g","b","a","component","resolveBackgroundColor","element","depth","style","color","sampleColorAtPoint","x","y","ignoreElements","heroBackdrop","heroRect","backdropColor","suppressed","elementBeneath","previous","shortestAngle","from","to","diff","normalizeAngle","angle","normalized","initializeHero","heroScrollSection","heroViewport","heroProgress","heroReleased","sectionRect","viewportHeight","nextProgress","shouldRelease","initializeLogo","logo","logoImg","currentLogoMode","resolveLogoAsset","mode","dataset","primaryKey","assetPath","setLogoSourceForMode","absolutePath","rect","sampleX","sampleY","sampledColor","luminance","theme","nextMode","initializeCircularNav","circularNav","menuToggleButton","header","anchorRevealController","overlay","wheel","backdrop","items","guide","menuState","gapAngle","arcSpan","navState","_","index","desiredGapCenter","gapCenterWithoutRotation","firstTargetAngle","currentAngle","correction","lastFocused","guideShown","preventScroll","event","closeTargets","closeNav","openNav","handlePointerDown","handlePointerMove","handlePointerUp","handleWheel","handleResize","targetSelector","target","evaluateMenuToggleContrast","images","maxOverlapRatio","buttonArea","img","imgRect","intersectLeft","intersectTop","intersectRight","intersectBottom","intersectWidth","intersectHeight","overlapRatio","shouldInvert","updateWheel","focusActiveItem","handleKeydown","showGuideOnce","rotateBy","getPointerAngle","delta","snapToActive","amount","scheduleSnap","getActiveItemIndex","targetAngle","current","force","activeIndex","distance","proximity","isActive","scale","opacity","itemDistance","transform","toPositive","base0","displayAngle0","gapCenter","arcStart","indexOfActive","minDistance","cx","cy","isMobile","initializeScrollReveal","elementsToReveal","prefersReducedMotion","harutoElement","rikoElement","computeProgress","targetY","range","centerY","distanceBelowCenter","updateFade","sharedProgress","progress","applyMotionPreference","initializeAnchorRevealOverride","greetingsElements","anchorMap","ACTIVE_CLASS","HOLD_DURATION","applyForSelector","selector","entry","handleAnchorClick","anchor","href","initializeFallSim","person","circle","floorEl","fallState","lastTriggerTurn","triggerAngle","rotationDurationMs","triggerDelayMs","gravity","restitution","stopVelocity","getPersonRect","state","getFloorY","shouldTrigger","now","elapsed","startTime","resetPerson","setPersonY","lastTime","tick","dt","turn","personRect","floor","t","__vite_glob_0_0","__vite_glob_0_1","__vite_glob_0_2","__vite_glob_0_3","__vite_glob_0_4","__vite_glob_0_5","__vite_glob_0_6","__vite_glob_0_7","__vite_glob_0_8","__vite_glob_0_9","__vite_glob_0_10","__vite_glob_1_0","__vite_glob_1_1","__vite_glob_1_2","__vite_glob_1_3","__vite_glob_1_4","__vite_glob_1_5","__vite_glob_1_6","__vite_glob_1_7","__vite_glob_1_8","__vite_glob_1_9","__vite_glob_1_10","isInitialized","initializeImageScroll","scrollTopTrack","scrollBottomTrack","topImages","bottomImages","sortByIndex","entries","pattern","path","src","topImageList","bottomImageList","duplicateCount","appendImages","track","altPrefix","i","updateHeroProgress","evaluateLogoContrast","lastScrollY","ticking","isMenuOpen","handleScroll","currentY","onScroll","runInitialContrastCheck"],"mappings":"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"}